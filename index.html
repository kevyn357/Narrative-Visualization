
<html>
  <script src='https://d3js.org/d3.v5.min.js'></script>
  <style> circle {fill: lightblue; stroke: black;}</style>
  <!-- <body onload='init()'> -->
    <svg width=1500 height=550> </svg>

<button type="button" onclick="window.location.href='https://kevyn357.github.io/Narrative-Visualization/pump.html';"> Slide 1</button>
  <button type="button" onclick="window.location.href='https://kevyn357.github.io/Narrative-Visualization/index.html';"> Slide 2</button>
  <button type="button" onclick="window.location.href='https://kevyn357.github.io/Narrative-Visualization/combined.html';"> Slide 3</button>
    
    <script>
      async function init()
      {
      const dataCrude = await d3.csv('crude.csv');
      console.log(dataCrude);

      //const months = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];
      
      var fmt1 = d3.timeParse("%b-%Y");
      console.log(fmt1("Jan-2000"));

      var x = d3.scaleTime().domain([new Date(2000,01,01), new Date(2022,12,31)]).range([0,1450]);
      var yCrude = d3.scaleLinear().domain([0, 150]).range([425,0]);

      d3.select('svg').append("g").attr("transform", "translate("+50+","+50+")")
      .selectAll("circle")
      .data(dataCrude)
      .enter()
      .append("circle")
      .attr("cx", function(d,i){return x(fmt1(d.Date));})
      .attr("cy", function(d,i){return yCrude(d.USCrude);})
      .attr("r", 2)
      ;

      d3.select("svg").append("g").attr("transform", "translate("+50+","+50+")")
      .attr("fill", "none")
      .call(d3.axisLeft(yCrude)
      );

      const xAxis = d3.axisBottom(x).ticks(24).tickFormat(d3.timeFormat("%b-%Y"));
      d3.select("svg").append("g").attr("transform", "translate("+50+","+475+")")
      .call(xAxis)
      .selectAll("text") 
      .style("text-anchor", "end")
      .attr("dx", "-.5em")
      .attr("dy", "-.1em")
      .attr("transform", "rotate(-70)")
      ;


      d3.select("svg").append("text")
      .attr("transform", "rotate(-90)")
   .attr("x", -250)
   .attr("y", 15)
   .style("text-anchor", "middle")
      .text("Crude Oil Price USD/Barrel");

      d3.select("svg").append("text")
        .attr("x", 800)             
        .attr("y", 20)
        .attr("text-anchor", "middle")  
        .style("font-size", "16px") 
        .style("text-decoration", "underline")  
      .text("Average Crude Oil Price in USA");

      d3.select("svg").append("text")
   .attr("x", 800)
   .attr("y", 550)
   .style("text-anchor", "middle")
   .text("Date");

      
      //http://www.d3noob.org/2013/01/how-to-rotate-text-labels-for-x-axis-of.html
      //https://stackoverflow.com/questions/67468191/how-to-convert-d3-time-scale-from-v3-to-v4

      //https://d3-graph-gallery.com/graph/connectedscatter_multi.html
      
      //const xAxis = d3.axisBottom().scale(x).ticks(12).tickFormat(d => months[d.getMonth()]);
      //d3.select("svg").append("g").attr("transform", "translate("+50+","+1500+")")
      //.call(xAxis);
      
      //d3.select("svg").append("g").attr("transform", "translate("+50+","+1500+")")
      //.attr("fill", "none")
      //.call(d3.axisBottom(x))
      //.ticks(12)
      //.tickFormat(d => months[d.getMonth()])
      //;
      
      }

      
    </script>

  <body onload='init()'>
    </body>
    <!-- </body> -->
  </html>
